<div class="container-custom py-12 max-w-md mx-auto">
  <h1 class="text-2xl font-bold mb-6">Inscription</h1>

  <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-4">
    <div>
      <label for="firstName" class="block text-sm font-medium mb-1">Prénom</label>
      <input
        type="text"
        formControlName="firstName"
        class="w-full border rounded px-3 py-2"
        id="firstName"
        placeholder="Votre prénom"
      />
      @if (form.controls.firstName.touched && form.controls.firstName.invalid) {
        <div class="text-red-600 text-sm mt-1">
          @if (form.controls.firstName.errors?.['required']) {
            Le prénom est requis.
          }
          @if (form.controls.firstName.errors?.['minlength']) {
            Le prénom doit contenir au moins 2 caractères.
          }
          @if (form.controls.firstName.errors?.['maxlength']) {
            Le prénom ne peut pas dépasser 50 caractères.
          }
        </div>
      }
    </div>

    <div>
      <label for="lastName" class="block text-sm font-medium mb-1">Nom</label>
      <input
        type="text"
        formControlName="lastName"
        class="w-full border rounded px-3 py-2"
        id="lastName"
        placeholder="Votre nom"
      />
      @if (form.controls.lastName.touched && form.controls.lastName.invalid) {
        <div class="text-red-600 text-sm mt-1">
          @if (form.controls.lastName.errors?.['required']) {
            Le nom est requis.
          }
          @if (form.controls.lastName.errors?.['minlength']) {
            Le nom doit contenir au moins 2 caractères.
          }
          @if (form.controls.lastName.errors?.['maxlength']) {
            Le nom ne peut pas dépasser 50 caractères.
          }
        </div>
      }
    </div>

    <div>
      <label for="email" class="block text-sm font-medium mb-1">Email</label>
      <input
        type="email"
        formControlName="email"
        class="w-full border rounded px-3 py-2"
        id="email"
        placeholder="votre@email.com"
      />
      @if (form.controls.email.touched && form.controls.email.invalid) {
        <div class="text-red-600 text-sm mt-1">
          Un email valide est requis.
        </div>
      }
    </div>

    <div>
      <label for="password" class="block text-sm font-medium mb-1">Mot de passe</label>
      <input
        type="password"
        formControlName="password"
        class="w-full border rounded px-3 py-2"
        id="password"
        placeholder="Minimum 6 caractères"
      />
      @if (form.controls.password.touched && form.controls.password.invalid) {
        <div class="text-red-600 text-sm mt-1">
          Le mot de passe est requis (minimum 6 caractères).
        </div>
      }
    </div>

    <div>
      <label for="confirmPassword" class="block text-sm font-medium mb-1">Confirmer le mot de passe</label>
      <input
        type="password"
        formControlName="confirmPassword"
        class="w-full border rounded px-3 py-2"
        id="confirmPassword"
        placeholder="Confirmez votre mot de passe"
      />
      @if (form.controls.confirmPassword.touched && form.controls.confirmPassword.invalid) {
        <div class="text-red-600 text-sm mt-1">
          La confirmation du mot de passe est requise.
        </div>
      }
      @if (form.touched && form.errors?.['passwordMismatch']) {
        <div class="text-red-600 text-sm mt-1">
          Les mots de passe ne correspondent pas.
        </div>
      }
    </div>

    <div>
      <label for="phone" class="block text-sm font-medium mb-1">Téléphone (optionnel)</label>
      <input
        type="tel"
        formControlName="phone"
        class="w-full border rounded px-3 py-2"
        id="phone"
        placeholder="+33612345678"
      />
    </div>

    @if (authStore.error()) {
      <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded">
        {{ authStore.error() }}
      </div>
    }

    <button
      type="submit"
      class="bg-primary text-white px-4 py-2 rounded w-full hover:bg-opacity-90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
      [disabled]="authStore.isLoading()"
    >
      @if (authStore.isLoading()) {
        Inscription en cours...
      } @else {
        S'inscrire
      }
    </button>
  </form>

  <div class="mt-4 text-sm space-y-2">
    <div>
      Déjà un compte ?
      <a routerLink="/auth/login" class="text-primary hover:underline">Se connecter</a>
    </div>
    <div>
      <a routerLink="/home" class="text-primary hover:underline">Retour à l'accueil</a>
    </div>
  </div>
</div>
