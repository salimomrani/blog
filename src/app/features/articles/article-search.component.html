<div class="mb-8">
  <!-- Search Section -->
  <div class="bg-white rounded-xl shadow-md p-6 space-y-6">
    <!-- Text Search -->
    <div class="flex flex-col sm:flex-row gap-3">
      <div class="flex-1 relative">
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <svg
            class="h-5 w-5 text-gray-400"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
        </div>
        <input
          type="text"
          [ngModel]="searchQuery()"
          (ngModelChange)="searchQuery.set($event)"
          (keypress)="onKeyPress($event)"
          placeholder="Rechercher par titre ou contenu..."
          class="block w-full pl-12 pr-4 py-3 text-gray-900 placeholder-gray-400 border border-gray-300 rounded-lg shadow-sm
                 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent
                 hover:border-gray-400 transition-all duration-200 ease-in-out"
        />
      </div>

      <div class="flex gap-2">
        <button
          type="button"
          (click)="onSearch()"
          [disabled]="!hasActiveFilters()"
          class="inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold rounded-lg shadow-md
                 hover:from-purple-700 hover:to-blue-700 hover:shadow-lg
                 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2
                 disabled:from-gray-300 disabled:to-gray-300 disabled:cursor-not-allowed disabled:shadow-none
                 transform transition-all duration-200 active:scale-95"
        >
          <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
          Rechercher
        </button>

        @if (hasActiveFilters()) {
          <button
            type="button"
            (click)="onClear()"
            class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-300 shadow-sm
                   hover:bg-gray-50 hover:border-gray-400 hover:shadow-md
                   focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2
                   transform transition-all duration-200 active:scale-95"
          >
            <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            Effacer
          </button>
        }
      </div>
    </div>

    <!-- Filters Row -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <!-- Category Filter -->
      <div class="space-y-2">
        <label for="category-select" class="block text-sm font-semibold text-gray-700">
          <span class="inline-flex items-center">
            <svg class="h-4 w-4 mr-1.5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
            </svg>
            Catégorie
          </span>
        </label>
        <div class="relative">
          <select
            id="category-select"
            [ngModel]="selectedCategoryId()"
            (ngModelChange)="onCategoryChange($event)"
            [disabled]="isLoadingFilters()"
            class="block w-full px-4 py-3 pr-10 text-gray-900 bg-white border border-gray-300 rounded-lg shadow-sm appearance-none cursor-pointer
                   focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent
                   hover:border-gray-400
                   disabled:bg-gray-100 disabled:text-gray-500 disabled:cursor-not-allowed disabled:border-gray-200
                   transition-all duration-200 ease-in-out"
          >
            <option value="">Toutes les catégories</option>
            @for (category of categories(); track category.id) {
              <option [value]="category.id">{{ category.name }}</option>
            }
          </select>
          <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
            <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
      </div>

      <!-- Tag Filter -->
      <div class="space-y-2">
        <label for="tag-select" class="block text-sm font-semibold text-gray-700">
          <span class="inline-flex items-center">
            <svg class="h-4 w-4 mr-1.5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
            </svg>
            Tag
          </span>
        </label>
        <div class="relative">
          <select
            id="tag-select"
            [ngModel]="selectedTagId()"
            (ngModelChange)="onTagChange($event)"
            [disabled]="isLoadingFilters()"
            class="block w-full px-4 py-3 pr-10 text-gray-900 bg-white border border-gray-300 rounded-lg shadow-sm appearance-none cursor-pointer
                   focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
                   hover:border-gray-400
                   disabled:bg-gray-100 disabled:text-gray-500 disabled:cursor-not-allowed disabled:border-gray-200
                   transition-all duration-200 ease-in-out"
          >
            <option value="">Tous les tags</option>
            @for (tag of tags(); track tag.id) {
              <option [value]="tag.id">#{{ tag.name }}</option>
            }
          </select>
          <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
            <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- Active Filters Display -->
    @if (hasActiveFilters()) {
      <div class="pt-4 border-t border-gray-200">
        <div class="flex flex-wrap items-center gap-2">
          <span class="text-sm font-semibold text-gray-600">
            Filtres actifs:
          </span>

          @if (searchQuery().trim()) {
            <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-gradient-to-r from-purple-100 to-purple-50 text-purple-800 border border-purple-200 shadow-sm">
              <svg class="h-4 w-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
              "{{ searchQuery() }}"
            </span>
          }

          @if (selectedCategoryId()) {
            <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-gradient-to-r from-purple-100 to-purple-50 text-purple-800 border border-purple-200 shadow-sm">
              <svg class="h-4 w-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
              </svg>
              {{ selectedCategory()?.name }}
            </span>
          }

          @if (selectedTagId()) {
            <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-gradient-to-r from-blue-100 to-blue-50 text-blue-800 border border-blue-200 shadow-sm">
              <svg class="h-4 w-4 mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
              </svg>
              #{{ selectedTag()?.name }}
            </span>
          }
        </div>
      </div>
    }
  </div>
</div>
