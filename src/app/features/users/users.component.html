<div class="users-page">
  <header class="page-header">
    <h1>Gestion des utilisateurs</h1>
    <button class="btn btn-primary" (click)="onShowCreateForm()">+ Nouvel utilisateur</button>
  </header>

  @if (showForm()) {
    <app-user-form
      [user]="editingUser()"
      [isSubmitting]="store.isLoading()"
      (submitUser)="onSubmitUser($event)"
      (cancelEdit)="onCancelEdit()"
    />
  }

  <div class="search-section">
    <input
      type="text"
      class="search-input"
      placeholder="Rechercher par nom, email, username..."
      [(ngModel)]="searchQuery"
      (input)="onSearch()"
    />
    <select class="filter-select" [(ngModel)]="roleFilter" (change)="onFilterByRole()">
      <option value="">Tous les rôles</option>
      <option value="USER">User</option>
      <option value="ADMIN">Admin</option>
      <option value="MODERATOR">Moderator</option>
    </select>
  </div>

  @if (filteredUsers().length > 0) {
    <div class="filtered-results">
      <p>{{ filteredUsers().length }} résultat(s) trouvé(s)</p>
    </div>
  }

  <app-users-list (editUser)="onEditUser($event)" (deleteUser)="onDeleteUser($event)" />
</div>
